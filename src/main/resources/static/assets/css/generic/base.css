/* generic/base.css — estilos globales mínimos */

/* Fondo con mosaico temático (debajo de todo el contenido y overlays) */
html, body{ min-height:100%; }
body{
  margin: 0;
  font-family: var(--ff-sans);
  color: var(--color-text);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  position: relative;
  background-color: var(--color-bg);
  background-image: var(--bg-pattern);
  background-repeat: repeat;
  background-size: var(--bg-pattern-size, 256px 256px);
  background-attachment: fixed; /* sensación de lienzo */
  /* Deja espacio al final para que el panel de vidrio no quede oculto
     detrás de la última tarjeta */
  padding-bottom: var(--shell-bottom-pad);
  /* Gutter dinámico que iguala al del panel de vidrio */
  --shell-gutter: var(--shell-side);
  /* El header es fijo; evitamos padding-top para no empujarlo. 
     El overlay (body::before) ya respeta --size-header. */
}

/* Panel de vidrio global detrás del contenido (excepto header) */
body::before{
  content:"";
  position: absolute;
  left: var(--shell-side);
  right: var(--shell-side);
  top: var(--size-header);
  bottom: var(--shell-bottom-pad);
  pointer-events: none;
  background: var(--shell-tint);
  backdrop-filter: blur(var(--shell-blur)) saturate(var(--shell-saturate));
  -webkit-backdrop-filter: blur(var(--shell-blur)) saturate(var(--shell-saturate));
  border: 1px solid rgba(255,255,255,.05);
  box-shadow: 0 8px 24px rgba(0,0,0,.08);
  border-radius: var(--radius-lg);
  z-index: 200; /* por debajo del contenido y del header */
}

/* En estado sin sesión, el contenido principal es fijo (login),
   por lo que el body no crece; fijamos el shell al viewport */
body.no-session::before{
  position: fixed;
  bottom: 0;
}

/* Asegura que contenido principal pinte sobre el shell (excluye header fijo) */
.view, .c-login, main, section, nav { position: relative; z-index: 400; }

@media (max-width: 1200px){ body{ --shell-gutter: 8vw; } body::before{ left:8vw; right:8vw; } }
@media (max-width: 900px){  body{ --shell-gutter: 6vw; } body::before{ left:6vw; right:6vw; } }
@media (max-width: 640px){  body{ --shell-gutter: 3vw; } body::before{ left:3vw; right:3vw; border-radius: var(--radius-md); } }

/* Layout simple para ficha de paciente */
.grid-2{ display:grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 12px; }
.paciente-detalle{ display: block; margin-top: 12px; }
.paciente-detalle .subseccion{ margin-top: 10px; }
.paciente-detalle ul{ margin: 6px 0 0; padding-left: 18px; }

/* Tiles para listas compactas (recetas, boletas) */
.list-tiles{ list-style: none; padding: 0; margin: 8px 0 0; display: grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 12px; }
.list-tiles .tile{
  background: color-mix(in oklab, var(--color-surface) 94%, #000);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  padding: 10px 12px;
  box-shadow: var(--shadow-1);
}
.tile__title{ font-weight: 600; margin-bottom: 6px; display:flex; align-items:center; gap:8px; }
.tile__title--right{ justify-content: flex-end; }
.tile__row{ display: grid; grid-template-columns: 56px 1fr; gap: 8px; align-items: start; margin: 4px 0; }
.tile__label{ font-weight: 600; color: var(--color-text-muted); }
.tile__value{ font-variant-numeric: tabular-nums; font-feature-settings: "tnum" 1; }
.tile__obs{ margin-top: 6px; font-size: .92em; color: var(--color-text-muted); }
.tile__eyes{ display: grid; gap: 8px; margin: 6px 0; }
.tile__eye{ display: grid; grid-template-columns: 56px 1fr; gap: 8px; align-items: start; }
.tile__eye .eye__label{ font-weight: 600; color: var(--color-text-muted); }
.tile__eye .eye__specs{ display: grid; gap: 2px; }
@media (min-width: 768px){
  .tile__eyes{ grid-template-columns: 1fr 1fr; }
}
.badge{ display:inline-block; padding:2px 6px; border-radius: 10px; font-size: .82em; line-height: 1.4; }
.badge--warn{ background: color-mix(in oklab, var(--color-accent) 22%, #000); color: #fff; }

/* Paginación */
.pagination{ display:flex; align-items:center; gap: 10px; margin: 10px 0; }
.pagination .page-info{ color: var(--color-text-muted); }
.pagination button{
  padding: 6px 10px; border-radius: var(--radius-sm);
  background: var(--color-surface);
  color: var(--color-text);
  border: 1px solid var(--color-border);
}
.pagination button:hover{ filter: brightness(1.05); }
.pagination button:disabled{ opacity: .5; cursor: not-allowed; }


/* Indicador de filas clicables */
.c-table tbody tr.row-paciente{ cursor: pointer; }
/* Mejora contraste etiquetas OD/OI/ADD */
/* etiqueta usa el token mutado por tema */
/* (no forzar color aquí para no romper claro/oscuro) */


