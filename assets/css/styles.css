/* ==========================================================
   LETELIER - UI Base (colores, tipografías y layout)
   ========================================================== */
:root{
  --c1:#1E70B8;
  --c1-dark:#00327A;
  --bg:#f9fbfd;
  --card:#f2f4f7;
  --text:#111;
  --border:#dcdfe4;
  --warn:#f59e0b;
}
*{box-sizing:border-box}
html, body{ overscroll-behavior:none }
body{
  font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;
  margin:0; background:var(--bg); color:var(--text); text-align:center;
  transition:background-color .3s,color .3s;
}
body.preboot section{display:none !important}

/* ==========================================================
   HEADER (siempre visible y por encima de overlays)
   ========================================================== */
header{
  background:linear-gradient(90deg, var(--c1) 0%, #0b4fa0 100%);
  color:#fff; padding:.75rem 1rem;
  display:flex; align-items:center; gap:1rem;
  position:sticky; top:0; z-index:3000;
}
.logo{height:56px;width:auto;object-fit:contain;display:block}
.menu-toggle{display:none;font-size:1.5rem;cursor:pointer}

/* Switch de tema al extremo derecho */
.theme-switch-wrapper{display:flex;align-items:center}
header > .theme-switch-wrapper{ margin-left:auto; order:99; }
.theme-switch{display:inline-block;height:30px;position:relative;width:54px}
.theme-switch input{display:none}
.slider{background:#c9d5e7;position:absolute;inset:0;border-radius:30px;cursor:pointer;transition:.3s}
.slider:before{content:"";position:absolute;left:3px;bottom:3px;height:24px;width:24px;border-radius:50%;background:#fff;transition:.3s}
input:checked + .slider{background:#004aad}
input:checked + .slider:before{transform:translateX(24px)}

/* Estado: sin sesión (oculta nav y sesión, mantiene switch) */
body.no-session nav,
body.no-session .session-area{ display:none !important; }

/* Sesión en header */
.session-area{display:flex;gap:.5rem;align-items:center}
.user-badge{background:rgba(255,255,255,.18);padding:.35rem .6rem;border-radius:999px;font-size:.9rem}
.btn-logout{background:#ffffff20;border:1px solid #ffffff40;color:#fff;padding:.35rem .6rem;border-radius:8px;cursor:pointer}
.btn-logout:hover{background:#ffffff30}

/* ==========================================================
   NAVEGACIÓN: píldoras transparentes (solo icono + texto)
   ========================================================== */
nav{flex:1;text-align:center}
nav ul{list-style:none;margin:0;padding:0;display:inline-flex;gap:.6rem}
.nav-pill{
  display:inline-flex;align-items:center;gap:.55rem;
  background:transparent; border:none; color:#ffffffd8; /* sin contorno ni relleno */
  padding:.35rem .6rem; border-radius:999px; cursor:pointer;
  transition:opacity .2s ease, transform .06s ease;
}
.nav-pill:hover,.nav-pill:focus-visible{ opacity:1; color:#fff; }
.nav-pill:active{ transform:translateY(1px); }
.nav-ic{ width:22px; height:22px; flex:0 0 22px; }
.nav-label{
  white-space:nowrap; overflow:hidden;
  max-width:0; opacity:.0;
  font-size:1.1rem; font-weight:600; letter-spacing:.01em;
  transition:max-width .28s ease, opacity .28s ease;
}
.nav-pill:hover .nav-label,.nav-pill:focus-visible .nav-label{
  max-width:20ch; opacity:1;
}
/* Accesibilidad focus */
.nav-pill:focus-visible{ outline:2px solid #fff; outline-offset:3px; }

/* ==========================================================
   DARK MODE
   ========================================================== */
body.dark-mode{ --bg:#0f1216; --card:#12161b; --text:#e0e0e0; --border:#1d232c; }
.dark-mode header{background:linear-gradient(90deg,#062c66,#001f3f)}
.dark-mode input,.dark-mode textarea{background:#0e1319;color:#e0e0e0;border-color:#293241}
.dark-mode button:not(.icon-search-btn){background:#0d4ca8}
.dark-mode button:not(.icon-search-btn):hover{background:#0b3f8b}

/* ==========================================================
   SECCIONES / TARJETAS
   ========================================================== */
section{
  display:none; padding:1.5rem; max-width:1000px; margin:1.25rem auto 2rem;
  background:var(--card); border:1px solid var(--border); border-radius:14px;
  box-shadow:0 6px 18px rgba(0,0,0,.06); text-align:left;
}
section.active{display:block}

label{display:block;margin:.5rem 0 .25rem}
input, textarea{ width:100%; padding:.6rem .7rem; margin-bottom:1rem; border:1px solid #bfc5cc; border-radius:10px; background:#fff; }
input[type="number"]{-moz-appearance:textfield}
input[type="number"]::-webkit-outer-spin-button,
input[type="number"]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}
.field-error{display:block;color:#b00020;font-size:.9rem;margin-top:-.4rem;margin-bottom:1rem}
input.is-invalid{border-color:#b00020;outline-color:#b00020}
.inline-check{display:inline-flex;align-items:center;gap:.5rem}
button{background:#0b5bd7;color:#fff;padding:.7rem 1.2rem;border:none;border-radius:10px;cursor:pointer}
button:hover{background:#084bb2}
button:active{transform:translateY(1px)}
button.secondary{background:#777}
button.secondary:hover{background:#555}
.subtle{opacity:.85;margin:.25rem 0 .75rem}
.msg-estado{margin-top:.5rem;font-weight:bold}

/* Buscador */
.filters.single{margin-bottom:1rem}
.search-wrap{position:relative;display:flex;align-items:center;background:#fff;border:1px solid #bfc5cc;border-radius:12px;padding:.1rem .1rem .1rem .75rem}
.search-wrap input{border:none;outline:none;background:transparent;margin:0;padding:.7rem .7rem;width:100%;font-size:1rem;padding-right:3rem}
.icon-search-btn{position:absolute;right:6px;top:50%;transform:translateY(-50%);width:44px;height:44px;border:none;background:transparent;color:#0b5bd7;border-radius:8px;cursor:pointer;display:grid;place-items:center}
.icon-search-btn:hover{background:#eef2f7}
.icon-search-btn:focus-visible{outline:2px solid #4f94ff;outline-offset:2px}
.dark-mode .search-wrap{background:#0e1319;border-color:#293241}
.dark-mode .icon-search-btn{color:#5aa0ff}
.dark-mode .icon-search-btn:hover{background:#18202b}

/* Tabla de receta */
.overflow-x-auto{overflow-x:auto}
.rx-table{width:100%;min-width:780px;border-collapse:separate;border-spacing:0;background:#fff;color:#0f172a;border:1px solid var(--border);border-radius:12px;overflow:hidden}
.rx-table thead th{background:linear-gradient(180deg,#f7f9fc,#eef2f7);color:#0f172a;font-weight:700;font-size:.9rem;letter-spacing:.02em;padding:.6rem .5rem;border-bottom:1px solid var(--border)}
.rx-table tbody td{border-top:1px solid var(--border);padding:.45rem .45rem}
.rx-table tbody tr:nth-child(even){background:#fafbfe}
.rx-table td input[type="number"], .rx-table td input[type="text"]{ width:100%;padding:.4rem .35rem;border:1px solid #cfd6de;border-radius:8px;background:#fff;color:#0f172a;text-align:center; }
.eye-tag{font-weight:700;background:#eef5ff;border-right:1px solid var(--border)}
.rx-table th:nth-child(4), .rx-table td:nth-child(4){border-right:2px dashed #cfd6de}
.dark-mode .rx-table{background:#111821;color:#e6edf3;border-color:#2a3442}
.dark-mode .rx-table thead th{background:#0f1722;color:#e6edf3;border-bottom-color:#2a3442}
.dark-mode .rx-table tbody td{border-top-color:#2a3442}
.dark-mode .rx-table tbody tr:nth-child(even){background:#121b26}
.dark-mode .rx-table td input[type="number"], .dark-mode .rx-table td input[type="text"]{background:#0e1319;color:#e6edf3;border-color:#2a3442}
.dark-mode .eye-tag{background:#132033;border-right-color:#2a3442}
.dark-mode .rx-table th:nth-child(4), .dark-mode .rx-table td:nth-child(4){border-right:2px dashed #3a4658}

/* Chips/etiquetas */
.chips{display:flex;flex-wrap:wrap;gap:.35rem;margin-top:.25rem}
.chip{display:inline-block;padding:.22rem .55rem;border:1px solid #d4d4d4;border-radius:999px;background:#f6f7fb;font-size:.85rem;line-height:1;white-space:nowrap}
.chip.suggested{border-style:dashed;cursor:pointer;opacity:.9}
.dark-mode .chip{background:#161f2a;border-color:#2a3442;color:#e6edf3}

/* Resultados */
.lista-resultados{display:flex;flex-direction:column;gap:1rem}
.result-card{position:relative;background:#fff;border:1px solid var(--border);border-radius:12px;padding:1rem 1rem 1.25rem 1rem;box-shadow:0 1px 3px rgba(0,0,0,.06)}
.dark-mode .result-card{background:#111821;border-color:#2a3442;box-shadow:0 1px 3px rgba(0,0,0,.4)}
.result-card h4{margin:0 0 .75rem 0;font-size:1.05rem;display:flex;align-items:center;gap:.5rem}
.warn-icon{display:inline-flex;align-items:center;justify-content:center;width:20px;height:20px;border-radius:999px;background:var(--warn);color:#111;font-weight:700;font-size:.85rem}
.result-grid{display:grid;grid-template-columns:1fr 1fr;gap:1rem 1rem}
.result-field{display:flex;flex-direction:column}
.result-field label{font-size:.85rem;opacity:.8;margin:0 0 .25rem 0}
.result-recipe{grid-column:1 / -1}
.card-actions{margin-top:1rem;display:flex;gap:.5rem;justify-content:flex-end}
.btn-edit{background:#1e70b8;color:#fff;border:none;border-radius:8px;padding:.5rem .9rem;cursor:pointer}
.btn-edit:hover{background:#15558a}

/* Checkbox cards */
.checkbox-grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:.6rem 1rem;margin-bottom:1rem}
.checkbox-grid .check-row{display:grid;grid-template-columns:1fr auto;align-items:center;background:#fff;border:1px solid #ddd;border-radius:10px;padding:.65rem .85rem;cursor:pointer}
.checkbox-grid .check-text{text-align:left;margin-right:1rem}
.dark-mode .checkbox-grid .check-row{background:#111821;border-color:#2a3442}

/* DP Cerca horizontal */
.dp-extra{margin:.75rem 0}
.dp-inline{display:inline-flex;align-items:center;gap:.6rem;margin-left:.75rem;flex-wrap:wrap}
.dp-inline input{width:140px;text-align:center}

/* Login (overlay bajo el header) */
.login-overlay{
  position:fixed; inset:0; background:rgba(4,10,20,.6);
  display:none; align-items:center; justify-content:center; padding:1rem; z-index:2000;
}
.login-overlay.active{ display:flex; }
.login-card{
  width:100%; max-width:380px; background:var(--card); border:1px solid var(--border);
  border-radius:14px; padding:1.2rem 1.2rem 1rem; box-shadow:0 10px 30px rgba(0,0,0,.2);
}
.login-card h2{ margin:0 0 .75rem 0; text-align:center; }
.login-btn{ width:100%; margin-top:.25rem; }
.login-msg{ text-align:center; margin:.5rem 0 0 0; min-height:1.25rem; font-weight:600; }
.hint{ margin-top:.6rem; }

/* Modal edición (overlay bajo el header, con blur) */
.modal-overlay{
  position:fixed; inset:0; background:rgba(4,10,20,.45); -webkit-backdrop-filter: blur(6px); backdrop-filter: blur(6px);
  display:none; align-items:center; justify-content:center; padding:1rem; z-index:2100; overflow:hidden;
}
.modal-overlay.active{display:flex}
body.modal-open{overflow:hidden; touch-action:none}
.modal-card{
  width:100%; max-width:900px; background:var(--card); border:1px solid var(--border); border-radius:14px; padding:0;
  box-shadow:0 10px 30px rgba(0,0,0,.2); max-height:calc(100dvh - 32px); display:flex; flex-direction:column;
}
.modal-header{display:flex;align-items:center;justify-content:space-between;padding:.9rem 1rem;border-bottom:1px solid var(--border)}
#editForm{display:flex;flex-direction:column;flex:1 1 auto;min-height:0;overflow:auto;-webkit-overflow-scrolling:touch;overscroll-behavior:contain}
.modal-content{ padding:1rem; flex:0 0 auto; }
.modal-actions{ padding:1rem;border-top:1px solid var(--border);display:flex;justify-content:flex-end;gap:.5rem;background:var(--card);position:sticky;bottom:0;z-index:1 }

/* Toast */
.toast{ position:fixed; right:16px; bottom:16px; z-index:3200; background:#111; color:#fff; padding:.6rem .8rem; border-radius:10px; box-shadow:0 6px 20px rgba(0,0,0,.35); opacity:0; transform:translateY(10px); pointer-events:none; transition:opacity .25s, transform .25s }
.toast.show{ opacity:1; transform:translateY(0); }

/* ==========================================================
   RESPONSIVE
   ========================================================== */
@media (max-width:768px){
  .logo{height:44px}
  header{padding:.6rem .8rem}
  /* Menú hamburguesa tipo hoja: izquierda, legible */
    /* Mostrar el ícono de hamburguesa en móvil */
  .menu-toggle{
    display:block;           /* <- antes estaba display:none */
    margin-left:.25rem;
    color:#fff;
    line-height:1;
  }
  nav{flex:0 0 auto;position:absolute;top:100%;left:0;right:0;background:#0b4fa0;display:none;box-shadow:0 2px 6px rgba(0,0,0,.35);z-index:100}
  nav.active{display:block}
  nav ul{flex-direction:column;align-items:flex-start;gap:0;margin:.25rem 0}
  nav ul li{width:100%}
  .nav-pill{width:100%;justify-content:flex-start;padding:.9rem 1rem}
  .nav-label{max-width:100%;opacity:1} /* en táctil el texto siempre visible */
  .result-grid{grid-template-columns:1fr}
  .checkbox-grid{grid-template-columns:1fr}
}
/* ---------- Overrides para píldoras 100% transparentes ---------- */
button.nav-pill,
.nav-pill{
  background:transparent !important;
  border:none !important;
  box-shadow:none !important;
  color:inherit;        /* usa el color del header */
}

button.nav-pill:hover,
.nav-pill:hover,
button.nav-pill:focus,
.nav-pill:focus,
button.nav-pill:active,
.nav-pill:active{
  background:transparent !important;  /* sin relleno en ningún estado */
}
